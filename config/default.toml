pair = "XBT/USD"
log_level = "INFO"
data_dir = "data"
ledger_path = "data/fifo_ledger.json"
persistence_backend = "json"   # "json" or "sqlite"

[kraken]
api_key = ""
api_secret = ""
ws_public_url = "wss://ws.kraken.com/v2"
ws_private_url = "wss://ws-auth.kraken.com/v2"
rest_url = "https://api.kraken.com"

[grid]
levels = 5
order_size_usd = "500"
min_spacing_bps = "20"
post_only = true
auto_compound = false
compound_base_usd = "5000"

[risk]
max_portfolio_drawdown_pct = 0.15
emergency_drawdown_pct = 0.20
price_velocity_freeze_pct = 0.03
price_velocity_window_sec = 60
price_velocity_cooldown_sec = 30
trailing_stop_enabled = true
trailing_stop_tighten_pct = 0.02

[tax]
holding_period_days = 365
near_threshold_days = 330
annual_exemption_eur = "1000"
emergency_dd_override_pct = 0.20
harvest_enabled = false
harvest_min_loss_eur = "50"
harvest_max_per_day = 3
harvest_target_net_eur = "800"

[regime.range_bound]
btc_target_pct = 0.50
btc_max_pct = 0.60
btc_min_pct = 0.40
grid_levels = 5
signal_enabled = true
order_size_scale = 1.0

[regime.trending_up]
btc_target_pct = 0.70
btc_max_pct = 0.80
btc_min_pct = 0.55
grid_levels = 3
signal_enabled = true
order_size_scale = 0.75

[regime.trending_down]
btc_target_pct = 0.30
btc_max_pct = 0.40
btc_min_pct = 0.15
grid_levels = 3
signal_enabled = true
order_size_scale = 0.75

[regime.chaos]
btc_target_pct = 0.00
btc_max_pct = 0.05
btc_min_pct = 0.00
grid_levels = 0
signal_enabled = false
order_size_scale = 0.5

[ws]
cancel_after_timeout_sec = 60
heartbeat_interval_sec = 20
reconnect_max_backoff_sec = 30
pending_ack_timeout_ms = 500

[rate_limit]
max_counter = 180
decay_rate = 3.75
headroom_pct = 0.80

[bollinger]
enabled = true
window = 20
multiplier = 2.0
spacing_scale = 0.5
min_spacing_bps = "15"
max_spacing_bps = "200"
atr_enabled = true
atr_window = 14
atr_weight = 0.3

[telegram]
enabled = false
bot_token = ""
chat_id = ""

[ai_signal]
enabled = false
provider = "gemini"        # "gemini", "anthropic", "openai"
api_key = ""
model = "gemini-2.0-flash"
temperature = 0.2
max_tokens = 512
cooldown_sec = 300         # Min seconds between AI calls
weight = 0.3               # Signal weight vs grid (0.0-1.0)
timeout_sec = 10

[metrics]
enabled = false
port = 9090
prefix = "icryptotrader"

[hedge]
enabled = false
trigger_drawdown_pct = 0.10    # Activate hedge at this drawdown level
strategy = "reduce_exposure"   # "reduce_exposure" or "inverse_grid"
max_reduction_pct = 0.50       # Max portion of buy levels to cancel

[web]
enabled = false
port = 8080
host = "127.0.0.1"
username = ""                  # Basic auth (leave empty to disable)
password = ""
